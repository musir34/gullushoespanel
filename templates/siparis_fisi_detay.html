
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Fiş Detayı</title>
  <style>
    body {
      background-color: #f7f7f7;
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .table-container {
      margin-bottom: 30px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    th {
      background-color: #eee;
    }
    .btn-back {
      display: inline-block;
      padding: 8px 14px;
      background-color: #555;
      color: #fff;
      border-radius: 4px;
      text-decoration: none;
      margin-top: 20px;
    }
    .btn-back:hover {
      background-color: #333;
    }
    .delivery-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid #eee;
    }
    .delivery-form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .delivery-form input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .delivery-form button {
      padding: 8px 16px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .delivery-records {
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Fiş Detayı</h1>
    
    <div class="table-container">
      <table>
        <tr>
          <th>Sipariş ID</th>
          <td>{{ fis.siparis_id }}</td>
        </tr>
        <tr>
          <th>Model Kodu</th>
          <td>{{ fis.urun_model_kodu }}</td>
        </tr>
        <tr>
          <th>Renk</th>
          <td>{{ fis.renk }}</td>
        </tr>
        <tr>
          <th>Beden 35</th>
          <td>{{ fis.beden_35 }}</td>
        </tr>
        <tr>
          <th>Beden 36</th>
          <td>{{ fis.beden_36 }}</td>
        </tr>
        <tr>
          <th>Beden 37</th>
          <td>{{ fis.beden_37 }}</td>
        </tr>
        <tr>
          <th>Beden 38</th>
          <td>{{ fis.beden_38 }}</td>
        </tr>
        <tr>
          <th>Beden 39</th>
          <td>{{ fis.beden_39 }}</td>
        </tr>
        <tr>
          <th>Beden 40</th>
          <td>{{ fis.beden_40 }}</td>
        </tr>
        <tr>
          <th>Beden 41</th>
          <td>{{ fis.beden_41 }}</td>
        </tr>
        <tr>
          <th>Çift Başı Fiyat (TL)</th>
          <td>{{ "%.2f"|format(fis.cift_basi_fiyat) }}</td>
        </tr>
        <tr>
          <th>Toplam Adet</th>
          <td>{{ fis.toplam_adet }}</td>
        </tr>
        <tr>
          <th>Kalan Adet</th>
          <td>{{ fis.kalan_adet }}</td>
        </tr>
        <tr>
          <th>Toplam Fiyat (TL)</th>
          <td>{{ "%.2f"|format(fis.toplam_fiyat) }}</td>
        </tr>
      </table>
    </div>

    <div class="delivery-section">
      <h2>Teslimat Kayıtları</h2>
      
      <form class="delivery-form" action="{{ url_for('siparis_fisi_bp.teslimat_kaydi_ekle', siparis_id=fis.siparis_id) }}" method="POST">
        <input type="number" name="beden_35" placeholder="35 Beden Adet" min="0">
        <input type="number" name="beden_36" placeholder="36 Beden Adet" min="0">
        <input type="number" name="beden_37" placeholder="37 Beden Adet" min="0">
        <input type="number" name="beden_38" placeholder="38 Beden Adet" min="0">
        <input type="number" name="beden_39" placeholder="39 Beden Adet" min="0">
        <input type="number" name="beden_40" placeholder="40 Beden Adet" min="0">
        <input type="number" name="beden_41" placeholder="41 Beden Adet" min="0">
        <button type="submit">Teslimat Ekle</button>
      </form>

      <div class="delivery-records">
        <table>
          <thead>
            <tr>
              <th>Tarih</th>
              <th>35</th>
              <th>36</th>
              <th>37</th>
              <th>38</th>
              <th>39</th>
              <th>40</th>
              <th>41</th>
              <th>Toplam</th>
            </tr>
          </thead>
          <tbody>
            {% if fis.teslim_kayitlari %}
              {% for kayit in fis.teslim_kayitlari|json_loads %}
                <tr>
                  <td>{{ kayit.tarih }}</td>
                  <td>{{ kayit.beden_35 }}</td>
                  <td>{{ kayit.beden_36 }}</td>
                  <td>{{ kayit.beden_37 }}</td>
                  <td>{{ kayit.beden_38 }}</td>
                  <td>{{ kayit.beden_39 }}</td>
                  <td>{{ kayit.beden_40 }}</td>
                  <td>{{ kayit.beden_41 }}</td>
                  <td>{{ kayit.toplam }}</td>
                </tr>
              {% endfor %}
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>

    <a href="{{ url_for('siparis_fisi_bp.siparis_fisi_sayfasi') }}" class="btn-back">Listeye Dön</a>
  </div>
</body>
</html>
